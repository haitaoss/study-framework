apply plugin: 'groovy' // 必 须
apply plugin: 'maven-publish'

dependencies {
    implementation gradleApi() //必须
    implementation localGroovy() //必须
}

repositories {
    google()
    jcenter()
    mavenCentral() //必须
}

//把项目入口设置为src/main/groovy
sourceSets {
    main {
        groovy {
            srcDir 'src/main/groovy'
        }
    }
}

publishing {
    publications {
        myLibrary(MavenPublication) {
            groupId = 'com.atguigu.plugin' //指定GAV坐标信息
            artifactId = 'library'
            version = '1.1'
            from components.java //发布jar包
            //from components.web///引入war插件，发布war包
        }
    }
    repositories {
        maven { url "$rootDir/lib/release" }
        /*    //发布项目到私服中
            maven {
                name = 'myRepo' //name属性可选,表示仓库名称，url必填
                //发布地址:可以是本地仓库或者maven私服
                //url = layout.buildDirectory.dir("repo")
                //url='http://my.org/repo'
                // change URLs to point to your repos, e.g. http://my.org/repo
                //认证信息:用户名和密码
                credentials {
                    username = 'joe'
                    password = 'secret'
                }
            }*/
    }
}